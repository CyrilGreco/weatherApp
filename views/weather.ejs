<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
			integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="./stylesheets/style.css" />
		<title>WeatherApp</title>
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
			integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
			crossorigin="anonymous"
		/>
		<script
			src="https://kit.fontawesome.com/a41e9403cf.js"
			crossorigin="anonymous"
		></script>

		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
		integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
		crossorigin=""/>

		<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
		integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
		crossorigin=""></script>

	

	</head>

	<body>
		<!-- HEADER -->
		<nav class="header navbar navbar-light bg-dark">
			Weather App
			<a class="logout" href="/users/logout">Deconnexion</a>
		</nav>

		<!-- GRID -->

		<div class="container-fluid">
			<div class="row">
				<!-- search bar -->
				<div class="col-10 offset-lg-6 col-lg-6">
					<div class="input-group">
						<!-- form POST -->
						<form class="w-100 d-flex" action="/add-city" method="POST">
						<input name="name" type="text" class="form-control" placeholder="city name" aria-label="city name">
						<div class="input-group-append">
						  <button class="btn btn-outline-secondary btn-warning" type="submit">Add</button>
						</form>
					</div>
				</div>

				</div>
				<!--  map interactive -->
				<div class="col-10 col-lg-6" id="mapid">

				</div>	
				<!-- city list -->	
				<div class="col-10 col-lg-6">
					
					<p class="d-flex justify-content-center align-items-center"> Update Cities <a href="/update-data"><i class="fas fa-sync pic"></i></p>
					</a>
					
						<% if( cityList.length === 0) { %> 
							<p class="text-center font-weight-bold">"No cities found"</p> 
						<% } else {
						for( var i=0; i <cityList.length; i++ ) { %>

						<ul class="list-group">
                            <div>
                                <li
								class="list-group-item d-flex justify-content-between align-items-center cityDiv" data-lon="<%=cityList[i].longitude%>" data-lat="<%=cityList[i].latitude%>" data-name="<%=cityList[i].name %>"
							    >
								<%=cityList[i].name %>
                                <div class="d-flex">
                                    <p><%= cityList[i].des %></p> 
                                    <p> <img class="img-fluid pic" src="<%=cityList[i].url%>" alt="picto" /></p>
									<p><span class="badge badge-pill badge-warning pic"><%=cityList[i].Tmax%></span><span class="badge badge-pill badge-secondary pic"><%=cityList[i].Tmin%></span></p>
							</div>
								
									
    								
								
                                
								<i> <a href="/delete-city?id=<%=cityList[i]._id %>"<span class="far fa-times-circle"></span></a></i>
							</li>
                            </div>
						</ul>

						<%
						}
					}
						%>

					</div>
				</div>
			</div>
		</div>

		<script
			src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
			integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
			integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
			crossorigin="anonymous"
		></script>
		<script
			src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
			integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
			crossorigin="anonymous"
		></script>
		<script type="text/javascript" src="./javascripts/script.js"></script>

	</body>
</html>
